#===================================
#
# MemoryUtils
#
#===================================
add_library(
    CommonUtils STATIC
    # precompiled header
    CommonUtils_pcp.h CommonUtils_pcp.cpp
    #
	ivt_utils.h
    LinkList.hpp
    StackList.hpp
    RandNumGenerator.h RandNumGenerator.cpp
    ThreadBarrierFixedNum.h
    )

set(COMMONUTILS_INCLUDE_DIR "${CMAKE_CURRENT_SOURCE_DIR}" CACHE STRING INTERNAL FORCE)

if (EXISTS $ENV{IVT_ROOT})
	message(STATUS "$ENV{IVT_ROOT}/lib64/libittnotify.lib")
	target_compile_definitions(CommonUtils PRIVATE __IVT_FOUND__)
	target_include_directories(CommonUtils PUBLIC "$ENV{IVT_ROOT}/include/")
	target_link_directories(CommonUtils PUBLIC "$ENV{IVT_ROOT}/lib64/")
	target_link_libraries(CommonUtils PUBLIC "$ENV{IVT_ROOT}/lib64/libittnotify.lib")
endif()

target_include_directories(
    CommonUtils PUBLIC
    ${COMMONUTILS_INCLUDE_DIR}
    )

if (MSVC)
    target_compile_definitions(CommonUtils PRIVATE _CRT_SECURE_NO_WARNINGS)
    target_compile_options(CommonUtils PRIVATE -YcCommonUtils_pcp.h)
endif()
